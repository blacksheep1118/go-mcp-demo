# Generated with thrift-gen-http-swagger
# https://github.com/hertz-contrib/swagger-generate/blob/main/thrift-gen-http-swagger

openapi: 3.0.3
info:
    title: API generated by thrift-gen-http-swagger
    description: API description
    version: 0.0.1
paths:
    /api/v1/chat:
        post:
            tags:
                - ApiService
            description: 非流式对话
            operationId: ApiService_Chat
            requestBody:
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/ChatRequestBody'
                    multipart/form-data:
                        schema:
                            $ref: '#/components/schemas/ChatRequestForm'
                    application/x-www-form-urlencoded:
                        schema:
                            $ref: '#/components/schemas/ChatRequestForm'
            responses:
                "200":
                    description: Successful response
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ChatResponseBody'
    /api/v1/chat/sse:
        post:
            tags:
                - ApiService
            description: 流式对话
            operationId: ApiService_ChatSSE
            parameters:
                - name: message
                  in: query
                  schema:
                    title: 用户消息
                    type: string
                    description: 用户发送的消息内容
                - name: conversation_id
                  in: query
                  schema:
                    title: 对话ID
                    type: string
                    description: 前端生成的UUID，多轮会话标识
            requestBody:
                content:
                    multipart/form-data:
                        schema:
                            $ref: '#/components/schemas/ChatSSEHandlerRequestForm'
                    application/x-www-form-urlencoded:
                        schema:
                            $ref: '#/components/schemas/ChatSSEHandlerRequestForm'
            responses:
                "200":
                    description: Successful response
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ChatSSEHandlerResponseBody'
    /api/v1/conversation/history:
        get:
            tags:
                - ApiService
            description: 获取会话历史
            operationId: ApiService_GetConversationHistory
            parameters:
                - name: conversation_id
                  in: query
                  schema:
                    title: 对话ID
                    type: string
                    description: 要获取的对话UUID
            responses:
                "200":
                    description: Successful response
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/GetConversationHistoryResponseBody'
    /api/v1/conversation/summarize:
        post:
            tags:
                - ApiService
            description: 会话总结
            operationId: ApiService_SummarizeConversation
            requestBody:
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/SummarizeConversationRequestBody'
            responses:
                "200":
                    description: Successful response
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/SummarizeConversationResponseBody'
    /api/v1/course/list:
        get:
            tags:
                - ApiService
            description: |-
                课程相关接口
                获取课表
            operationId: ApiService_GetCourseList
            parameters:
                - name: term
                  in: query
                  schema:
                    title: 学期
                    type: string
                    description: 查询的学期，例如202501
                - name: is_refresh
                  in: query
                  schema:
                    title: 是否刷新
                    type: boolean
                    description: 是否强制刷新课程数据，默认为false
            responses:
                "200":
                    description: Successful response
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/CourseListResponseBody'
    /api/v1/template:
        post:
            tags:
                - ApiService
            description: 示例接口 idl写好后运行make hertz-gen-api生成脚手架
            operationId: ApiService_Template
            requestBody:
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/TemplateRequestBody'
            responses:
                "200":
                    description: Successful response
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/TemplateResponseBody'
    /api/v1/todo/create:
        post:
            tags:
                - ApiService
            description: |-
                待办事项管理
                创建待办事项
            operationId: ApiService_CreateTodo
            requestBody:
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/CreateTodoRequestBody'
            responses:
                "200":
                    description: Successful response
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/CreateTodoResponseBody'
    /api/v1/todo/delete:
        delete:
            tags:
                - ApiService
            description: 删除待办事项
            operationId: ApiService_DeleteTodo
            parameters:
                - name: id
                  in: query
                  schema:
                    title: 待办事项ID
                    type: string
                    description: 要删除的待办事项ID
            responses:
                "200":
                    description: Successful response
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/DeleteTodoResponseBody'
    /api/v1/todo/detail:
        get:
            tags:
                - ApiService
            description: 获取待办事项详情
            operationId: ApiService_GetTodo
            parameters:
                - name: id
                  in: query
                  schema:
                    title: 待办事项ID
                    type: string
                    description: 要查询的待办事项ID
            responses:
                "200":
                    description: Successful response
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/GetTodoResponseBody'
    /api/v1/todo/list:
        get:
            tags:
                - ApiService
            description: 获取所有待办事项列表
            operationId: ApiService_ListTodo
            responses:
                "200":
                    description: Successful response
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ListTodoResponseBody'
    /api/v1/todo/search:
        get:
            tags:
                - ApiService
            description: 搜索待办事项
            operationId: ApiService_SearchTodo
            parameters:
                - name: status
                  in: query
                  schema:
                    title: 状态筛选
                    type: integer
                    description: 0-未完成，1-已完成，不传则返回全部
                    format: int16
                - name: priority
                  in: query
                  schema:
                    title: 优先级筛选
                    type: integer
                    description: 1-紧急且重要，2-重要不紧急，3-紧急不重要，4-不重要不紧急
                    format: int16
                - name: category
                  in: query
                  schema:
                    title: 分类筛选
                    type: string
                    description: 按分类筛选待办事项
            responses:
                "200":
                    description: Successful response
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/SearchTodoResponseBody'
    /api/v1/todo/update:
        put:
            tags:
                - ApiService
            description: 更新待办事项
            operationId: ApiService_UpdateTodo
            requestBody:
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/UpdateTodoRequestBody'
            responses:
                "200":
                    description: Successful response
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/UpdateTodoResponseBody'
    /api/v1/user/info:
        get:
            tags:
                - ApiService
            description: 获取用户信息
            operationId: ApiService_GetUserInfo
            responses:
                "200":
                    description: Successful response
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/GetUserInfoResponseBody'
    /api/v1/user/login:
        post:
            tags:
                - ApiService
            description: 获取jwch登录数据
            operationId: ApiService_GetLoginData
            requestBody:
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/GetLoginDataRequestBody'
            responses:
                "200":
                    description: Successful response
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/GetLoginDataResponseBody'
components:
    schemas:
        BaseResp:
            title: 基础响应
            required:
                - code
                - msg
            type: object
            properties:
                code:
                    title: 状态码
                    type: integer
                    description: 响应状态码
                    format: int64
                msg:
                    title: 消息
                    type: string
                    description: 响应消息
            description: 所有响应的基础结构
        ChatRequestBody:
            title: 聊天请求
            required:
                - message
            type: object
            properties:
                message:
                    title: 用户消息
                    type: string
                    description: 用户发送的消息内容
                conversation_id:
                    title: 对话ID
                    type: string
                    description: 前端生成的UUID，多轮会话唯一标识
            description: 包含用户消息的聊天请求
        ChatRequestForm:
            title: 聊天请求
            type: object
            properties:
                image:
                    title: 图片文件
                    type: string
                    description: 可选的图片文件，支持上传图片给AI分析
                    format: binary
            description: 包含用户消息的聊天请求
        ChatResponseBody:
            title: 聊天响应
            required:
                - response
            type: object
            properties:
                response:
                    title: AI回复
                    type: string
                    description: AI生成的回复内容
                conversation_id:
                    title: 对话ID
                    type: string
                    description: 回显本轮所属的对话UUID
            description: 包含AI回复的聊天响应
        ChatSSEHandlerRequestForm:
            title: 流式聊天请求
            type: object
            properties:
                image:
                    title: 图片文件
                    type: file
                    description: 可选的图片文件，支持上传图片给AI分析
                    format: binary
            description: 包含用户消息的流式聊天请求
        ChatSSEHandlerResponseBody:
            title: 流式聊天响应
            required:
                - response
            type: object
            properties:
                response:
                    title: AI回复片段
                    type: string
                    description: AI生成的回复片段
                conversation_id:
                    title: 对话ID UUID
                    type: string
            description: 包含AI回复片段的流式聊天响应
        Course:
            type: object
            properties:
                name:
                    title: 课程名称
                    type: string
                    description: 课程的名称
                teacher:
                    title: 教师姓名
                    type: string
                    description: 授课教师的姓名
                scheduleRules:
                    title: 排课规则
                    type: array
                    items:
                        $ref: '#/components/schemas/CourseScheduleRule'
                    description: 课程的排课规则列表
                remark:
                    title: 备注
                    type: string
                    description: 课程的备注信息
                lessonplan:
                    title: 授课计划
                    type: string
                    description: 课程的授课计划
                syllabus:
                    title: 教学大纲
                    type: string
                    description: 课程的教学大纲
                rawScheduleRules:
                    title: 原始排课规则
                    type: string
                    description: 课程的原始排课规则数据
                rawAdjust:
                    title: 原始调课规则
                    type: string
                    description: 课程的原始调课规则数据
                examType:
                    title: 考试类型
                    type: string
                    description: 课程的考试类型
            description: 以下代码来自fzuhelper-server
        CourseListResponseBody:
            title: 课程列表响应
            required:
                - base
                - data
            type: object
            properties:
                base:
                    $ref: '#/components/schemas/BaseResp'
                data:
                    title: 课程列表
                    type: array
                    items:
                        $ref: '#/components/schemas/Course'
                    description: 指定学期的课程列表
            description: 包含课程列表的响应
        CourseScheduleRule:
            type: object
            properties:
                location:
                    title: 上课地点
                    type: string
                    description: 课程的上课地点
                startClass:
                    title: 开始节数
                    type: integer
                    description: 课程的开始节数
                    format: int64
                endClass:
                    title: 结束节数
                    type: integer
                    description: 课程的结束节数
                    format: int64
                startWeek:
                    title: 起始周
                    type: integer
                    description: 课程的起始周数
                    format: int64
                endWeek:
                    title: 结束周
                    type: integer
                    description: 课程的结束周数
                    format: int64
                weekday:
                    title: 星期几
                    type: integer
                    description: 课程的上课星期几
                    format: int64
                single:
                    title: 单周
                    type: boolean
                    description: 课程是否在单周上课
                double:
                    title: 双周
                    type: boolean
                    description: 课程是否在双周上课
                adjust:
                    title: 调课标志
                    type: boolean
                    description: 课程是否为调课
            description: 课程安排
        CreateTodoRequestBody:
            title: 创建待办事项请求
            required:
                - title
                - content
                - start_time
                - end_time
                - priority
            type: object
            properties:
                title:
                    title: 待办事项标题
                    type: string
                    description: 待办事项的标题
                content:
                    title: 待办事项内容
                    type: string
                    description: 待办事项的详细内容
                start_time:
                    title: 开始时间
                    type: integer
                    description: 待办事项开始时间，unix毫秒时间戳
                    format: int64
                end_time:
                    title: 结束时间
                    type: integer
                    description: 待办事项结束时间，unix毫秒时间戳
                    format: int64
                is_all_day:
                    title: 是否全天
                    type: integer
                    description: 是否为全天事项，0-否，1-是
                    format: int16
                priority:
                    title: 优先级
                    type: integer
                    description: 1-紧急且重要，2-重要不紧急，3-紧急不重要，4-不重要不紧急
                    format: int16
                remind_at:
                    title: 提醒时间
                    type: integer
                    description: 待办事项提醒时间，unix毫秒时间戳
                    format: int64
                category:
                    title: 分类
                    type: string
                    description: 待办事项分类
            description: 创建待办事项的请求参数
        CreateTodoResponseBody:
            title: 创建待办事项响应
            required:
                - id
            type: object
            properties:
                id:
                    title: 待办事项ID
                    type: string
                    description: 创建成功的待办事项ID
            description: 返回创建成功的待办事项ID
        DeleteTodoResponseBody:
            title: 删除待办事项响应
            required:
                - id
            type: object
            properties:
                id:
                    title: 待办事项ID
                    type: string
                    description: 已删除的待办事项ID
            description: 返回已删除的待办事项ID
        GetConversationHistoryResponseBody:
            title: 获取历史响应
            required:
                - conversation_id
                - messages
            type: object
            properties:
                conversation_id:
                    title: 对话ID
                    type: string
                messages:
                    title: json消息
                    type: strig
            description: 返回对话的全部消息
        GetLoginDataRequestBody:
            title: 登录请求
            required:
                - stu_id
                - password
            type: object
            properties:
                stu_id:
                    title: 学号
                    type: string
                    description: 福州大学学号
                password:
                    title: 密码
                    type: string
                    description: 用户的登录密码
            description: 包含学号和密码的登录请求
        GetLoginDataResponseBody:
            title: 登录响应
            required:
                - identifier
                - cookie
                - access_token
            type: object
            properties:
                identifier:
                    title: 用户ID
                    type: string
                    description: 登录成功后返回的用户唯一标识符
                cookie:
                    title: 会话Cookie
                    type: string
                    description: 登录成功后返回的会话Cookie
                access_token:
                    title: 访问令牌
                    type: string
                    description: 登录成功后返回的访问令牌
            description: 包含用户ID和会话Cookie的登录响应
        GetTodoResponseBody:
            title: 获取待办事项响应
            required:
                - todo
            type: object
            properties:
                todo:
                    $ref: '#/components/schemas/TodoItem'
            description: 返回待办事项详细信息
        GetUserInfoResponseBody:
            title: 用户信息响应
            required:
                - user_id
                - username
            type: object
            properties:
                user_id:
                    title: 用户ID
                    type: string
                    description: 用户的唯一标识符
                username:
                    title: 用户名
                    type: string
                    description: 用户的登录名
            description: 包含用户ID和用户名的响应
        ListTodoResponseBody:
            title: 待办事项列表响应
            required:
                - todos
            type: object
            properties:
                todos:
                    title: 待办事项列表
                    type: array
                    items:
                        $ref: '#/components/schemas/TodoItem'
            description: 返回待办事项列表
        SearchTodoResponseBody:
            title: 待办事项列表响应
            required:
                - todos
            type: object
            properties:
                todos:
                    title: 待办事项列表
                    type: array
                    items:
                        $ref: '#/components/schemas/TodoItem'
            description: 返回待办事项列表
        SummarizeConversationRequestBody:
            title: 总结会话请求
            required:
                - conversation_id
            type: object
            properties:
                conversation_id:
                    title: 会话ID
                    type: string
                    description: 需要总结的会话ID
            description: 请求总结指定会话的内容
        SummarizeConversationResponseBody:
            title: 总结会话响应
            required:
                - summary
                - tags
                - tool_calls_json
                - notes
            type: object
            properties:
                summary:
                    title: 会话总结
                    type: string
                    description: 会话内容的总结
                tags:
                    title: 标签列表
                    type: array
                    items:
                        type: string
                    description: 会话相关的标签
                tool_calls_json:
                    title: 工具调用JSON
                    type: string
                    description: 工具调用的JSON字符串
                notes:
                    title: 笔记
                    type: object
                    additionalProperties:
                        type: string
                    description: AI 或用户针对总结写的任意键值笔记，包含文件路径等信息
            description: 包含会话总结、标签、工具调用和笔记的响应
        TemplateRequestBody:
            title: 示例请求
            required:
                - templateId
            type: object
            properties:
                templateId:
                    title: 示范用param
                    type: string
                    description: 示范用param
            description: 示例请求
        TemplateResponseBody:
            title: 示例响应
            required:
                - user
            type: object
            properties:
                user:
                    $ref: '#/components/schemas/User'
            description: 示例响应
        TodoItem:
            title: 待办事项
            type: object
            properties:
                id:
                    title: 待办事项ID
                    type: string
                title:
                    title: 标题
                    type: string
                content:
                    title: 内容
                    type: string
                start_time:
                    title: 开始时间
                    type: integer
                    format: int64
                end_time:
                    title: 结束时间
                    type: integer
                    format: int64
                is_all_day:
                    title: 是否全天
                    type: integer
                    format: int16
                status:
                    title: 状态
                    type: integer
                    description: 0-未完成，1-已完成
                    format: int16
                priority:
                    title: 优先级
                    type: integer
                    description: 1-紧急且重要，2-重要不紧急，3-紧急不重要，4-不重要不紧急
                    format: int16
                remind_at:
                    title: 提醒时间
                    type: integer
                    format: int64
                category:
                    title: 分类
                    type: string
                created_at:
                    title: 创建时间
                    type: integer
                    format: int64
                updated_at:
                    title: 更新时间
                    type: integer
                    format: int64
            description: 待办事项详细信息
        UpdateTodoRequestBody:
            title: 更新待办事项请求
            required:
                - id
            type: object
            properties:
                id:
                    title: 待办事项ID
                    type: string
                    description: 要更新的待办事项ID
                title:
                    title: 标题
                    type: string
                content:
                    title: 内容
                    type: string
                start_time:
                    title: 开始时间
                    type: integer
                    format: int64
                end_time:
                    title: 结束时间
                    type: integer
                    format: int64
                is_all_day:
                    title: 是否全天
                    type: integer
                    format: int16
                status:
                    title: 状态
                    type: integer
                    description: 0-未完成，1-已完成
                    format: int16
                priority:
                    title: 优先级
                    type: integer
                    description: 1-紧急且重要，2-重要不紧急，3-紧急不重要，4-不重要不紧急
                    format: int16
                remind_at:
                    title: 提醒时间
                    type: integer
                    format: int64
                category:
                    title: 分类
                    type: string
            description: 更新待办事项信息，只传需要更新的字段
        UpdateTodoResponseBody:
            title: 更新待办事项响应
            required:
                - id
            type: object
            properties:
                id:
                    title: 待办事项ID
                    type: string
            description: 返回更新成功的待办事项ID
        User:
            title: 用户信息
            required:
                - id
                - name
            type: object
            properties:
                id:
                    title: 用户ID
                    type: string
                    description: 唯一标识用户的ID
                name:
                    title: 用户名
                    type: string
                    description: 用户的显示名称
            description: 包含用户基本信息的结构
tags:
    - name: ApiService
